<% provide(:title, 'Find Report') %>
<div class="row">
  <div class="offset1 span9">
    <ul class="nav nav-tabs">
      <li><%= link_to "Ward List", wardlist_path %></li>
      <li><%= link_to "Investigators", investigators_path %></li>
      <li><%= link_to "Watch List", watch_path %></li>
      <li class="active"><%= link_to "Find Report", reports_path %></li>
      <li><%= link_to "Report Activity", newactivity_path %></li>
      <li><%= link_to "Archive", archive_path %></li>
    </ul>
  </div>
</div>
<div class="container">
  <fullbody class="span11"> 
    <%= render 'report' %>
    <div class="span1 dropdown">
      <a class="dropdown-toggle btn btn-small btn-primary" data-toggle="dropdown" href="#" style="padding-top:5px; width:35px; height:22px;">Date</a>
      <ul class="dropdown-menu bottom-up" role="menu" aria-labelledby="dropdownMenu">
        <li><%= link_to "In the last week", reports_path(:activity_date => 1.week.ago) %></li>
        <li><%= link_to "In the last month", reports_path(:activity_date => 1.month.ago) %></li>
        <li><%= link_to "In the last quarter", reports_path(:activity_date => 3.months.ago) %></li>
        <li><%= link_to "In the last six months", reports_path(:activity_date => 6.months.ago) %></li>
        <li><%= link_to "In the last year", reports_path(:activity_date => 12.months.ago) %></li>
      </ul>
    </div>
    <div class="span1">
      <%= collection_select(nil, :family_id, Family.where("archived = ?", false), :id, :name, {:prompt => "Family"}, 
                            {:onchange => "redirect_to_family(this.value)", :class => "btn btn-small btn-secondary", :style => "width:70px;"}) %>
    </div>
    <%= javascript_tag do %>
      function redirect_to_family(familyId){
        window.location = "<%= reports_path %>?family_id=" + familyId;
      } 
    <% end %>
    <div class="span8 pull-right">
      <%= will_paginate @activities, :inner_window => 2, :outer_window => 1, style: "margin: 0 0 0 0;" %>
    </div>
  </fullbody>
</div>

